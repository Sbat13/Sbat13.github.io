{
  "hash": "cdc72ff105cc55280d67d4864e352f25",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ndate: \"2025-11-16\"\ntitle: \"Visualizações em Transportes\"\nsubtitle: \"Como comunicar informação complexa de forma elegante\"\nimage: images/featured_image.jpg\nlang: pt\nopen-graph:\n  description: \"O mundo dos transportes lida com multiplas dimensões e quantidades enormes de variáveis e dados. Felizmente grandes mentes dedicaram-se a desenvolver visualizações especializadas que permitem comunicar de forma clara, precisa e simples. Neste artigo vamos explorar algumas visualizações notáveis.\"\n  image: images/featured_image.jpg\n  image-width: 100\n  type: article\ntoc: true\ncategories: \n  - \"Mobilidade\"\n  - \"Dados\"\n  - \"Visualização\"\nformat:\n  html: default\n  #pdf:\n  #  toc: false\n  #  documentclass: scrartcl\n  #  output-file: \"20251005_PT_Dados.pdf\"\n---\n\n# Dados elegantes\nO mundo dos transportes lida com multiplas dimensões e quantidades enormes de variáveis e dados. Felizmente grandes mentes dedicaram-se a desenvolver visualizações especializadas que permitem comunicar de forma clara, precisa e simples toda essa complexidade.\n<br>\nNeste artigo vamos explorar algumas visualizações notáveis que tiveram e ainda têm, um impacto extraordinário na forma como é comunicada informação em transportes.\n\n\n\n::::: {layout=\"[70,30]\"}\n<div>\n\n**O meu top 3 de visualizações no mundo dos transportes** <br><br>\n\nPara encontrar o meu top, ponderei vários factores:\n<ol>\n<li> utilidade </li>\n<li> factor de simplificação de complexidade</li>\n<li> clareza</li>\n<li> elegância </li>\n<li> adopção </li>\n</ol>\n\n <br><br>\n\n</div>\n\n::: {#second-column}\n      \n![Photo by <a href=\"https://unsplash.com/@dekubaum?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\">Dennis Kummer</a> on <a href=\"https://unsplash.com/photos/aerial-photography-of-city-52gEprMkp7M?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText\">Unsplash</a>](images/featured_image.jpg){.preview-image .lightbox width=\"300\"}\n:::\n:::::\n\n## Medalha de Bronze\n\nEm transportes é recorrente a necessidade de representar **fluxos** mas ninguém o fez melhor do que o Engenheiro Civil Francês Charles Joseph Minard na sua representação da campanha falhada de invasão de Napoleão à Russia em 1812 - 1813.\n\n![](images/Russian_Campaign.png){.preview-image .lightbox width=\"1000\"}\n\nA quantidaded de informação apresentada nesta visualização é incrível. \nPor um lado, temos o trajecto geográfico do exército francês até chegar a Moscovo. Estão representadas as localidades e os rios cuja travessia representava um perigo.\nPodemos ver o tamanho do exército de soldados franceses, que vai diminuindo de tamanho com as baixas sucessivas (o autor adiciona os números para facilitar a extração da informação).\nAinda no mesmo gráfico temos o regresso das tropas (fluxo a negro), com duas informações adicionais, temos as datas de alguns pontos críticos da viagem de regresso bem como a temperatura nesses dias, precisamente para evidenciar as temperaturas extremas.\nApesar da quantidade de informação de diferente natureza, o uso de apenas uma cor direciona o observador para o conteúdo principal.\n\nNão é demais notar a genialidade da mente brilhante que idealizou esta visualização há mais de 200 anos!!!\n\n### Fluxos em transportes\n\nNa sua essência a representação de Minard corresponde a um diagrama de Sankey (utilizado primordialmente em termodinâmica), mas cujo uso não é muito habitual em transportes.\nOs gráficos de fluxos habitualmente utilizados em transportes são significativamente mais simples. Habitualmente representa-se a distância no eixo das abcissas e a variável de interesse nas ordenadas. Por exemplo, podemos representar o número de passageiros a bordo de um veículo, criando o denominado **diagrama de carga**.\n\n### Diagrama de Carga\nExemplo de um diagrama de carga de 1862 do próprio Minard, para diferentes linhas do caminho de ferro francês.\n\n![](images/Tableaux_Minard.png){.preview-image .lightbox width=\"1000\"}\n\nEnquanto nessa altura era necessário um esforço enorme para produzir estas autênticas obras de arte, hoje em dia está ao nosso alcance fazê-lo. Deixo aqui um exemplo interactivo e o código usado para o gerar.\n\n::: {#79e3744b .cell execution_count=1}\n``` {.python .cell-code code-fold=\"true\"}\nimport plotly.graph_objects as go\nimport pandas as pd\n\n# Example data: stops and passenger activity\ndata = {\n    \"Stop\": [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\"],\n    \"Boarding\": [20, 5, 12, 3, 15, 0],\n    \"Alighting\": [0, 10, 5, 13, 2, 25]\n}\n\ndf = pd.DataFrame(data)\n\n# Compute passenger load at each segment\ndf[\"Load\"] = df[\"Boarding\"].cumsum() - df[\"Alighting\"].cumsum()\n\n# Create Figure\nfig = go.Figure()\n\n# Line for load\nfig.add_trace(go.Scatter(\n    x=df[\"Stop\"],\n    y=df[\"Load\"],\n    mode=\"lines+markers\",\n    name=\"A bordo\",\n    line=dict(width=3),\n    marker=dict(size=8)\n))\n\n# Bars showing boarding\nfig.add_trace(go.Bar(\n    x=df[\"Stop\"],\n    y=df[\"Boarding\"],\n    name=\"Entram\",\n    opacity=0.6\n))\n\n# Bars showing alighting\nfig.add_trace(go.Bar(\n    x=df[\"Stop\"],\n    y=df[\"Alighting\"],\n    name=\"Saem\",\n    opacity=0.6\n))\n\nfig.update_layout(\n    title=\"Diagrama de carga de passageiros\",\n    xaxis_title=\"Paragens\",\n    yaxis_title=\"Passageiros\",\n    barmode=\"relative\",\n    template=\"plotly_white\",\n    legend=dict(orientation=\"h\", y=-0.2)\n)\n```\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<div>            <script src=\"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG\"></script><script type=\"text/javascript\">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: \"STIX-Web\"}});}</script>                <script type=\"text/javascript\">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>\n        <script charset=\"utf-8\" src=\"https://cdn.plot.ly/plotly-3.1.0.min.js\" integrity=\"sha256-Ei4740bWZhaUTQuD6q9yQlgVCMPBz6CZWhevDYPv93A=\" crossorigin=\"anonymous\"></script>                <div id=\"4e01dc3f-5907-43e8-bd6f-7344766492f7\" class=\"plotly-graph-div\" style=\"height:525px; width:100%;\"></div>            <script type=\"text/javascript\">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById(\"4e01dc3f-5907-43e8-bd6f-7344766492f7\")) {                    Plotly.newPlot(                        \"4e01dc3f-5907-43e8-bd6f-7344766492f7\",                        [{\"line\":{\"width\":3},\"marker\":{\"size\":8},\"mode\":\"lines+markers\",\"name\":\"A bordo\",\"x\":[\"A\",\"B\",\"C\",\"D\",\"E\",\"F\"],\"y\":{\"dtype\":\"i1\",\"bdata\":\"FA8WDBkA\"},\"type\":\"scatter\"},{\"name\":\"Entram\",\"opacity\":0.6,\"x\":[\"A\",\"B\",\"C\",\"D\",\"E\",\"F\"],\"y\":{\"dtype\":\"i1\",\"bdata\":\"FAUMAw8A\"},\"type\":\"bar\"},{\"name\":\"Saem\",\"opacity\":0.6,\"x\":[\"A\",\"B\",\"C\",\"D\",\"E\",\"F\"],\"y\":{\"dtype\":\"i1\",\"bdata\":\"AAoFDQIZ\"},\"type\":\"bar\"}],                        {\"template\":{\"data\":{\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"white\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"white\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"#C8D4E3\",\"linecolor\":\"#C8D4E3\",\"minorgridcolor\":\"#C8D4E3\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"#C8D4E3\",\"linecolor\":\"#C8D4E3\",\"minorgridcolor\":\"#C8D4E3\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"choropleth\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"choropleth\"}],\"contourcarpet\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"contourcarpet\"}],\"contour\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"contour\"}],\"heatmap\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"heatmap\"}],\"histogram2dcontour\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"histogram2dcontour\"}],\"histogram2d\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"histogram2d\"}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"mesh3d\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"mesh3d\"}],\"parcoords\":[{\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"parcoords\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}],\"scatter3d\":[{\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatter3d\"}],\"scattercarpet\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattercarpet\"}],\"scattergeo\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattergeo\"}],\"scattergl\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattergl\"}],\"scattermapbox\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattermapbox\"}],\"scattermap\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattermap\"}],\"scatterpolargl\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterpolargl\"}],\"scatterpolar\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterpolar\"}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"scatterternary\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterternary\"}],\"surface\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"surface\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}]},\"layout\":{\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"autotypenumbers\":\"strict\",\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]],\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]},\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"geo\":{\"bgcolor\":\"white\",\"lakecolor\":\"white\",\"landcolor\":\"white\",\"showlakes\":true,\"showland\":true,\"subunitcolor\":\"#C8D4E3\"},\"hoverlabel\":{\"align\":\"left\"},\"hovermode\":\"closest\",\"mapbox\":{\"style\":\"light\"},\"margin\":{\"b\":0,\"l\":0,\"r\":0,\"t\":30},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"white\",\"polar\":{\"angularaxis\":{\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\"},\"bgcolor\":\"white\",\"radialaxis\":{\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\"}},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"},\"yaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"},\"zaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"ternary\":{\"aaxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"},\"bgcolor\":\"white\",\"caxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"}},\"title\":{\"x\":0.05},\"xaxis\":{\"automargin\":true,\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"#EBF0F8\",\"zerolinewidth\":2},\"yaxis\":{\"automargin\":true,\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"#EBF0F8\",\"zerolinewidth\":2}}},\"legend\":{\"orientation\":\"h\",\"y\":-0.2},\"title\":{\"text\":\"Diagrama de carga de passageiros\"},\"xaxis\":{\"title\":{\"text\":\"Paragens\"}},\"yaxis\":{\"title\":{\"text\":\"Passageiros\"}},\"barmode\":\"relative\"},                        {\"responsive\": true}                    ).then(function(){\n                            \nvar gd = document.getElementById('4e01dc3f-5907-43e8-bd6f-7344766492f7');\nvar x = new MutationObserver(function (mutations, observer) {{\n        var display = window.getComputedStyle(gd).display;\n        if (!display || display === 'none') {{\n            console.log([gd, 'removed!']);\n            Plotly.purge(gd);\n            observer.disconnect();\n        }}\n}});\n\n// Listen for the removal of the full notebook cells\nvar notebookContainer = gd.closest('#notebook-container');\nif (notebookContainer) {{\n    x.observe(notebookContainer, {childList: true});\n}}\n\n// Listen for the clearing of the current output cell\nvar outputEl = gd.closest('.output');\nif (outputEl) {{\n    x.observe(outputEl, {childList: true});\n}}\n\n                        })                };            </script>        </div>\n```\n:::\n:::\n\n\n## Medalha de Prata\nContinuando por terras francesas, é incontornável não mencionar os diagramas espaço-tempo também designados por diagramas de Marey. Étienne Jules Marey foi um inventor e fotógrafo francês com contribuições em vários domínios da ciência, curiosamente este método foi inicialmente desenvolvido por Charles Ibry um Engenheiro dos Caminhos de Ferro franceses do qual pouco se sabe.\n\nEsta representação tornou-se reconhecida após a proposta da sua aplicação por Marey para a linha Paris-Lyon em 1880.\n\n![](images/marey-train-schedule.png){.preview-image .lightbox width=\"1000\"}\n\nTal como o nome indica, o diagrama representa a distância nas ordenadas e o tempo no eixo das abcissas. As estações estão colocadas de acordo com a sua distância à origem, assim é possível obter imensa informação útil. Onde e quando se cruzam os comboios, horários de saida em cada estação, a velocidade média entre cada estação, o posicionamento de cada comboio a uma determinada hora, o tempo de espera nas estações, etc.\n\nEsta representação é ainda hoje (150 anos depois) uma representação de muito utilizada nos transportes. É particularmente útil na gestão de slots em infraestruturas ferroviárias.\n\n### Diagrama espaço-tempo\n\n::: {#a53d18e6 .cell execution_count=2}\n``` {.python .cell-code code-fold=\"true\"}\nimport pandas as pd\nimport plotly.graph_objects as go\nfrom datetime import datetime\n\n# -------- Example station list with approximate distances --------\nstations = [\n    (\"Paris\", 0),\n    (\"Melun\", 50),\n    (\"Montereau\", 80),\n    (\"Sens\", 115),\n    (\"Montargis\", 150),\n    (\"Nevers\", 270),\n    (\"Moulins\", 350),\n    (\"Roanne\", 480),\n    (\"Lyon\", 465)\n]\n\nstations_df = pd.DataFrame(stations, columns=[\"station\", \"distance_km\"])\ndist_map = stations_df.set_index(\"station\")[\"distance_km\"].to_dict()\n\n# ---------- Example timetable data (synthetic, Marey-style) ----------\ntrains = {\n    \"Express 1\": [(\"Paris\", \"06:00\"), (\"Melun\", \"06:45\"), (\"Sens\", \"07:40\"),\n                  (\"Nevers\", \"09:30\"), (\"Lyon\", \"12:00\")],\n    \"Local A\":   [(\"Paris\", \"06:20\"), (\"Melun\", \"07:10\"), (\"Montereau\", \"07:40\"),\n                  (\"Montargis\", \"08:50\"), (\"Moulins\", \"11:45\"), (\"Lyon\", \"15:00\")],\n    \"Express 2\": [(\"Paris\", \"07:00\"), (\"Melun\", \"07:40\"), (\"Sens\", \"08:25\"),\n                  (\"Nevers\", \"10:00\"), (\"Lyon\", \"12:30\")],\n    \"Freight\":   [(\"Paris\", \"05:30\"), (\"Melun\", \"06:40\"), (\"Montereau\", \"07:30\"),\n                  (\"Montargis\", \"09:05\"), (\"Roanne\", \"13:00\")],\n    \"Return 1\":  [(\"Lyon\", \"07:10\"), (\"Roanne\", \"08:40\"), (\"Moulins\", \"10:50\"),\n                  (\"Nevers\", \"12:05\"), (\"Paris\", \"15:30\")]\n}\n\n# -------- Flatten timetable into a dataframe --------\nrecords = []\nfor train, stops in trains.items():\n    for station, time_str in stops:\n        if station not in dist_map:\n            continue\n        hh, mm = map(int, time_str.split(\":\"))\n        t = datetime(1880, 6, 1, hh, mm)  # example date\n        records.append({\n            \"train\": train,\n            \"station\": station,\n            \"time\": t,\n            \"distance_km\": dist_map[station]\n        })\n\ndf = pd.DataFrame(records)\n\n# -------- Create Plotly figure --------\nfig = go.Figure()\n\nfor train, g in df.groupby(\"train\"):\n    g_sorted = g.sort_values(\"time\")\n    fig.add_trace(go.Scatter(\n        x=g_sorted[\"time\"],\n        y=g_sorted[\"distance_km\"],\n        mode=\"lines+markers\",\n        name=train,\n        hovertemplate=\"<b>%{text}</b><br><br>Time: %{x}<br>Distance: %{y} km\",\n        text=[train]*len(g_sorted)\n    ))\n\n# -------- Add horizontal station lines --------\nfor _, row in stations_df.iterrows():\n    fig.add_shape(\n        type=\"line\",\n        x0=df[\"time\"].min(),\n        x1=df[\"time\"].max(),\n        y0=row[\"distance_km\"],\n        y1=row[\"distance_km\"],\n        line=dict(color=\"lightgray\", width=1, dash=\"dot\")\n    )\n    fig.add_annotation(\n        x=df[\"time\"].min(),\n        y=row[\"distance_km\"],\n        text=row[\"station\"],\n        showarrow=False,\n        xanchor=\"right\",\n        yanchor=\"middle\",\n        xshift=-10\n    )\n\n# -------- Layout styling --------\nfig.update_layout(\n    title=\"Gráfico de Marey — Paris ⇄ Lyon (fictício)\",\n    xaxis_title=\"Hora do dia\",\n    yaxis_title=\"Distância desde Paris (km)\",\n    yaxis=dict(autorange=\"reversed\"),  # Paris on top, Lyon at bottom\n    hovermode=\"closest\",\n    template=\"plotly_white\",\n    height=700\n)\n\nfig\n```\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<div>            <script src=\"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG\"></script><script type=\"text/javascript\">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: \"STIX-Web\"}});}</script>                <script type=\"text/javascript\">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>\n        <script charset=\"utf-8\" src=\"https://cdn.plot.ly/plotly-3.1.0.min.js\" integrity=\"sha256-Ei4740bWZhaUTQuD6q9yQlgVCMPBz6CZWhevDYPv93A=\" crossorigin=\"anonymous\"></script>                <div id=\"e73491a2-9e5c-4536-8e2a-c3debb653ecb\" class=\"plotly-graph-div\" style=\"height:700px; width:100%;\"></div>            <script type=\"text/javascript\">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById(\"e73491a2-9e5c-4536-8e2a-c3debb653ecb\")) {                    Plotly.newPlot(                        \"e73491a2-9e5c-4536-8e2a-c3debb653ecb\",                        [{\"hovertemplate\":\"\\u003cb\\u003e%{text}\\u003c\\u002fb\\u003e\\u003cbr\\u003e\\u003cbr\\u003eTime: %{x}\\u003cbr\\u003eDistance: %{y} km\",\"mode\":\"lines+markers\",\"name\":\"Express 1\",\"text\":[\"Express 1\",\"Express 1\",\"Express 1\",\"Express 1\",\"Express 1\"],\"x\":[\"1880-06-01T06:00:00.000000000\",\"1880-06-01T06:45:00.000000000\",\"1880-06-01T07:40:00.000000000\",\"1880-06-01T09:30:00.000000000\",\"1880-06-01T12:00:00.000000000\"],\"y\":{\"dtype\":\"i2\",\"bdata\":\"AAAyAHMADgHRAQ==\"},\"type\":\"scatter\"},{\"hovertemplate\":\"\\u003cb\\u003e%{text}\\u003c\\u002fb\\u003e\\u003cbr\\u003e\\u003cbr\\u003eTime: %{x}\\u003cbr\\u003eDistance: %{y} km\",\"mode\":\"lines+markers\",\"name\":\"Express 2\",\"text\":[\"Express 2\",\"Express 2\",\"Express 2\",\"Express 2\",\"Express 2\"],\"x\":[\"1880-06-01T07:00:00.000000000\",\"1880-06-01T07:40:00.000000000\",\"1880-06-01T08:25:00.000000000\",\"1880-06-01T10:00:00.000000000\",\"1880-06-01T12:30:00.000000000\"],\"y\":{\"dtype\":\"i2\",\"bdata\":\"AAAyAHMADgHRAQ==\"},\"type\":\"scatter\"},{\"hovertemplate\":\"\\u003cb\\u003e%{text}\\u003c\\u002fb\\u003e\\u003cbr\\u003e\\u003cbr\\u003eTime: %{x}\\u003cbr\\u003eDistance: %{y} km\",\"mode\":\"lines+markers\",\"name\":\"Freight\",\"text\":[\"Freight\",\"Freight\",\"Freight\",\"Freight\",\"Freight\"],\"x\":[\"1880-06-01T05:30:00.000000000\",\"1880-06-01T06:40:00.000000000\",\"1880-06-01T07:30:00.000000000\",\"1880-06-01T09:05:00.000000000\",\"1880-06-01T13:00:00.000000000\"],\"y\":{\"dtype\":\"i2\",\"bdata\":\"AAAyAFAAlgDgAQ==\"},\"type\":\"scatter\"},{\"hovertemplate\":\"\\u003cb\\u003e%{text}\\u003c\\u002fb\\u003e\\u003cbr\\u003e\\u003cbr\\u003eTime: %{x}\\u003cbr\\u003eDistance: %{y} km\",\"mode\":\"lines+markers\",\"name\":\"Local A\",\"text\":[\"Local A\",\"Local A\",\"Local A\",\"Local A\",\"Local A\",\"Local A\"],\"x\":[\"1880-06-01T06:20:00.000000000\",\"1880-06-01T07:10:00.000000000\",\"1880-06-01T07:40:00.000000000\",\"1880-06-01T08:50:00.000000000\",\"1880-06-01T11:45:00.000000000\",\"1880-06-01T15:00:00.000000000\"],\"y\":{\"dtype\":\"i2\",\"bdata\":\"AAAyAFAAlgBeAdEB\"},\"type\":\"scatter\"},{\"hovertemplate\":\"\\u003cb\\u003e%{text}\\u003c\\u002fb\\u003e\\u003cbr\\u003e\\u003cbr\\u003eTime: %{x}\\u003cbr\\u003eDistance: %{y} km\",\"mode\":\"lines+markers\",\"name\":\"Return 1\",\"text\":[\"Return 1\",\"Return 1\",\"Return 1\",\"Return 1\",\"Return 1\"],\"x\":[\"1880-06-01T07:10:00.000000000\",\"1880-06-01T08:40:00.000000000\",\"1880-06-01T10:50:00.000000000\",\"1880-06-01T12:05:00.000000000\",\"1880-06-01T15:30:00.000000000\"],\"y\":{\"dtype\":\"i2\",\"bdata\":\"0QHgAV4BDgEAAA==\"},\"type\":\"scatter\"}],                        {\"template\":{\"data\":{\"barpolar\":[{\"marker\":{\"line\":{\"color\":\"white\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"barpolar\"}],\"bar\":[{\"error_x\":{\"color\":\"#2a3f5f\"},\"error_y\":{\"color\":\"#2a3f5f\"},\"marker\":{\"line\":{\"color\":\"white\",\"width\":0.5},\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"bar\"}],\"carpet\":[{\"aaxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"#C8D4E3\",\"linecolor\":\"#C8D4E3\",\"minorgridcolor\":\"#C8D4E3\",\"startlinecolor\":\"#2a3f5f\"},\"baxis\":{\"endlinecolor\":\"#2a3f5f\",\"gridcolor\":\"#C8D4E3\",\"linecolor\":\"#C8D4E3\",\"minorgridcolor\":\"#C8D4E3\",\"startlinecolor\":\"#2a3f5f\"},\"type\":\"carpet\"}],\"choropleth\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"choropleth\"}],\"contourcarpet\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"contourcarpet\"}],\"contour\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"contour\"}],\"heatmap\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"heatmap\"}],\"histogram2dcontour\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"histogram2dcontour\"}],\"histogram2d\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"histogram2d\"}],\"histogram\":[{\"marker\":{\"pattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2}},\"type\":\"histogram\"}],\"mesh3d\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"type\":\"mesh3d\"}],\"parcoords\":[{\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"parcoords\"}],\"pie\":[{\"automargin\":true,\"type\":\"pie\"}],\"scatter3d\":[{\"line\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatter3d\"}],\"scattercarpet\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattercarpet\"}],\"scattergeo\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattergeo\"}],\"scattergl\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattergl\"}],\"scattermapbox\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattermapbox\"}],\"scattermap\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scattermap\"}],\"scatterpolargl\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterpolargl\"}],\"scatterpolar\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterpolar\"}],\"scatter\":[{\"fillpattern\":{\"fillmode\":\"overlay\",\"size\":10,\"solidity\":0.2},\"type\":\"scatter\"}],\"scatterternary\":[{\"marker\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"type\":\"scatterternary\"}],\"surface\":[{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"},\"colorscale\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"type\":\"surface\"}],\"table\":[{\"cells\":{\"fill\":{\"color\":\"#EBF0F8\"},\"line\":{\"color\":\"white\"}},\"header\":{\"fill\":{\"color\":\"#C8D4E3\"},\"line\":{\"color\":\"white\"}},\"type\":\"table\"}]},\"layout\":{\"annotationdefaults\":{\"arrowcolor\":\"#2a3f5f\",\"arrowhead\":0,\"arrowwidth\":1},\"autotypenumbers\":\"strict\",\"coloraxis\":{\"colorbar\":{\"outlinewidth\":0,\"ticks\":\"\"}},\"colorscale\":{\"diverging\":[[0,\"#8e0152\"],[0.1,\"#c51b7d\"],[0.2,\"#de77ae\"],[0.3,\"#f1b6da\"],[0.4,\"#fde0ef\"],[0.5,\"#f7f7f7\"],[0.6,\"#e6f5d0\"],[0.7,\"#b8e186\"],[0.8,\"#7fbc41\"],[0.9,\"#4d9221\"],[1,\"#276419\"]],\"sequential\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]],\"sequentialminus\":[[0.0,\"#0d0887\"],[0.1111111111111111,\"#46039f\"],[0.2222222222222222,\"#7201a8\"],[0.3333333333333333,\"#9c179e\"],[0.4444444444444444,\"#bd3786\"],[0.5555555555555556,\"#d8576b\"],[0.6666666666666666,\"#ed7953\"],[0.7777777777777778,\"#fb9f3a\"],[0.8888888888888888,\"#fdca26\"],[1.0,\"#f0f921\"]]},\"colorway\":[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],\"font\":{\"color\":\"#2a3f5f\"},\"geo\":{\"bgcolor\":\"white\",\"lakecolor\":\"white\",\"landcolor\":\"white\",\"showlakes\":true,\"showland\":true,\"subunitcolor\":\"#C8D4E3\"},\"hoverlabel\":{\"align\":\"left\"},\"hovermode\":\"closest\",\"mapbox\":{\"style\":\"light\"},\"margin\":{\"b\":0,\"l\":0,\"r\":0,\"t\":30},\"paper_bgcolor\":\"white\",\"plot_bgcolor\":\"white\",\"polar\":{\"angularaxis\":{\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\"},\"bgcolor\":\"white\",\"radialaxis\":{\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\"}},\"scene\":{\"xaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"},\"yaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"},\"zaxis\":{\"backgroundcolor\":\"white\",\"gridcolor\":\"#DFE8F3\",\"gridwidth\":2,\"linecolor\":\"#EBF0F8\",\"showbackground\":true,\"ticks\":\"\",\"zerolinecolor\":\"#EBF0F8\"}},\"shapedefaults\":{\"line\":{\"color\":\"#2a3f5f\"}},\"ternary\":{\"aaxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"},\"baxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"},\"bgcolor\":\"white\",\"caxis\":{\"gridcolor\":\"#DFE8F3\",\"linecolor\":\"#A2B1C6\",\"ticks\":\"\"}},\"title\":{\"x\":0.05},\"xaxis\":{\"automargin\":true,\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"#EBF0F8\",\"zerolinewidth\":2},\"yaxis\":{\"automargin\":true,\"gridcolor\":\"#EBF0F8\",\"linecolor\":\"#EBF0F8\",\"ticks\":\"\",\"title\":{\"standoff\":15},\"zerolinecolor\":\"#EBF0F8\",\"zerolinewidth\":2}}},\"shapes\":[{\"line\":{\"color\":\"lightgray\",\"dash\":\"dot\",\"width\":1},\"type\":\"line\",\"x0\":\"1880-06-01T05:30:00\",\"x1\":\"1880-06-01T15:30:00\",\"y0\":0,\"y1\":0},{\"line\":{\"color\":\"lightgray\",\"dash\":\"dot\",\"width\":1},\"type\":\"line\",\"x0\":\"1880-06-01T05:30:00\",\"x1\":\"1880-06-01T15:30:00\",\"y0\":50,\"y1\":50},{\"line\":{\"color\":\"lightgray\",\"dash\":\"dot\",\"width\":1},\"type\":\"line\",\"x0\":\"1880-06-01T05:30:00\",\"x1\":\"1880-06-01T15:30:00\",\"y0\":80,\"y1\":80},{\"line\":{\"color\":\"lightgray\",\"dash\":\"dot\",\"width\":1},\"type\":\"line\",\"x0\":\"1880-06-01T05:30:00\",\"x1\":\"1880-06-01T15:30:00\",\"y0\":115,\"y1\":115},{\"line\":{\"color\":\"lightgray\",\"dash\":\"dot\",\"width\":1},\"type\":\"line\",\"x0\":\"1880-06-01T05:30:00\",\"x1\":\"1880-06-01T15:30:00\",\"y0\":150,\"y1\":150},{\"line\":{\"color\":\"lightgray\",\"dash\":\"dot\",\"width\":1},\"type\":\"line\",\"x0\":\"1880-06-01T05:30:00\",\"x1\":\"1880-06-01T15:30:00\",\"y0\":270,\"y1\":270},{\"line\":{\"color\":\"lightgray\",\"dash\":\"dot\",\"width\":1},\"type\":\"line\",\"x0\":\"1880-06-01T05:30:00\",\"x1\":\"1880-06-01T15:30:00\",\"y0\":350,\"y1\":350},{\"line\":{\"color\":\"lightgray\",\"dash\":\"dot\",\"width\":1},\"type\":\"line\",\"x0\":\"1880-06-01T05:30:00\",\"x1\":\"1880-06-01T15:30:00\",\"y0\":480,\"y1\":480},{\"line\":{\"color\":\"lightgray\",\"dash\":\"dot\",\"width\":1},\"type\":\"line\",\"x0\":\"1880-06-01T05:30:00\",\"x1\":\"1880-06-01T15:30:00\",\"y0\":465,\"y1\":465}],\"annotations\":[{\"showarrow\":false,\"text\":\"Paris\",\"x\":\"1880-06-01T05:30:00\",\"xanchor\":\"right\",\"xshift\":-10,\"y\":0,\"yanchor\":\"middle\"},{\"showarrow\":false,\"text\":\"Melun\",\"x\":\"1880-06-01T05:30:00\",\"xanchor\":\"right\",\"xshift\":-10,\"y\":50,\"yanchor\":\"middle\"},{\"showarrow\":false,\"text\":\"Montereau\",\"x\":\"1880-06-01T05:30:00\",\"xanchor\":\"right\",\"xshift\":-10,\"y\":80,\"yanchor\":\"middle\"},{\"showarrow\":false,\"text\":\"Sens\",\"x\":\"1880-06-01T05:30:00\",\"xanchor\":\"right\",\"xshift\":-10,\"y\":115,\"yanchor\":\"middle\"},{\"showarrow\":false,\"text\":\"Montargis\",\"x\":\"1880-06-01T05:30:00\",\"xanchor\":\"right\",\"xshift\":-10,\"y\":150,\"yanchor\":\"middle\"},{\"showarrow\":false,\"text\":\"Nevers\",\"x\":\"1880-06-01T05:30:00\",\"xanchor\":\"right\",\"xshift\":-10,\"y\":270,\"yanchor\":\"middle\"},{\"showarrow\":false,\"text\":\"Moulins\",\"x\":\"1880-06-01T05:30:00\",\"xanchor\":\"right\",\"xshift\":-10,\"y\":350,\"yanchor\":\"middle\"},{\"showarrow\":false,\"text\":\"Roanne\",\"x\":\"1880-06-01T05:30:00\",\"xanchor\":\"right\",\"xshift\":-10,\"y\":480,\"yanchor\":\"middle\"},{\"showarrow\":false,\"text\":\"Lyon\",\"x\":\"1880-06-01T05:30:00\",\"xanchor\":\"right\",\"xshift\":-10,\"y\":465,\"yanchor\":\"middle\"}],\"yaxis\":{\"title\":{\"text\":\"Dist\\u00e2ncia desde Paris (km)\"},\"autorange\":\"reversed\"},\"title\":{\"text\":\"Gr\\u00e1fico de Marey \\u2014 Paris \\u21c4 Lyon (fict\\u00edcio)\"},\"xaxis\":{\"title\":{\"text\":\"Hora do dia\"}},\"hovermode\":\"closest\",\"height\":700},                        {\"responsive\": true}                    ).then(function(){\n                            \nvar gd = document.getElementById('e73491a2-9e5c-4536-8e2a-c3debb653ecb');\nvar x = new MutationObserver(function (mutations, observer) {{\n        var display = window.getComputedStyle(gd).display;\n        if (!display || display === 'none') {{\n            console.log([gd, 'removed!']);\n            Plotly.purge(gd);\n            observer.disconnect();\n        }}\n}});\n\n// Listen for the removal of the full notebook cells\nvar notebookContainer = gd.closest('#notebook-container');\nif (notebookContainer) {{\n    x.observe(notebookContainer, {childList: true});\n}}\n\n// Listen for the clearing of the current output cell\nvar outputEl = gd.closest('.output');\nif (outputEl) {{\n    x.observe(outputEl, {childList: true});\n}}\n\n                        })                };            </script>        </div>\n```\n:::\n:::\n\n\n## Medalha de Ouro\nUma das peças de comunicação de um sistema de transportes é o **Mapa de Rede** e por isso mesmo a representação esquemática introduzida por Beck com o Mapa do metro de Londres em 1933 marcou um momento de viragem nas peças de comunicação ao público.\n\nEstamos de tal forma habituados a esta representação que é difícil ter a real noção da transformação, por isso, deixo para comparação o Mapa de Londres de 1908 que representava o \"state of the art\" a nivel mundial.\n\n![Metro de Londres 1908 ](images/London_Map_1908.jpg){.preview-image .lightbox width=\"1000\"}\n\n![Metro de Londres 1933 - Beck ](images/London_Map_1933.jpg){.preview-image .lightbox width=\"1000\"}\n\nA representação idealizada por Beck foi apenas ligeiramente melhorada (nos quase 100 anos decorridos), principalmente ao nível de cores e contraste. Os conceitos básicos que diferenciam esta representação permanecem, detalhes como a grelha octilinear, a distinção entre estações principais e secundárias.\n\nO mapa esquemático de rede é de tal forma poderoso que é considerado pelas populações uma melhor referência que o próprio mapa geográfico.\n\nDada ser vista e compreendida por todo o tipo de pessoas em todo o mundo, esta visualização tem de estar no topo.\n\n## Menção Honrosa\n\nQualquer planeador de transportes ficaria decepcionado por não ver aqui a representação mais útil para o seu trabalho diário. É de inteira justiça destacar os diagramas de Gantt e a seu papel no processo de optimização.\n\n## Nota final - curiosidades\nNa preparação deste artigo, encontrei muitos detalhes e técnicas utilizadas para melhorar as visualizações, mas sobretudo fiquei fascinado com técnicas de organização da informação que encontrei. São uma espécie de códigos secretos e ocultos que facilitam a interpretação por parte do nosso cérebro de forma inconsciente.\n\nUm exemplo engraçado, que só conhecia em parte é o mapa das autoestradas em Espanha. Sendo Madrid a capital e no centro do território, existem 6 autoestradas radiais. Estas autoestradas estão numeradas no sentido do ponteiro dos relógios, começando com a A1 (Autovia del Norte) e acabando com a A6 (Autovia del Noroeste).\n\nAdicionalmente, em Madrid foram feitas autoestradas circulares a M30, M40 e M50. A parte curiosa vem com a sua numeração, o 30, o 40 e o 50 correspondem aproximadamente ao seu perímetro, dando assim de forma indirecta uma referência geográfica adicional. Na verdade a M30 tem uma extensão de 32.5 km, sendo que foi usado o zero, precisamente para ter a representação gráfica de um circulo (o zero à direita). Infelizmente, foi criada a M45 em momento posterior e tiveram de optar entre continuar a dar a concistência de referência de aneis concênctricos, ou seja entre a M40 e a M50 ou manter o zero no final... Ficou M45.\n\nDestaco este ponto sobre a importância dos sistemas de códigos (ou cores), porque nos ajudam a navegar uma quantidade enorme de informação quase sem darmos conta.\nSaber que alguém parou para pensar nisso é na minha opinião, fascinante.\n\n------------------------------------------------------------------------\n\n[Pausa Técnica](https://sbat13.github.io/)\n\n<!-- _share-links.qmd -->\n<div class=\"social-share\" style=\"display: flex; gap: 20px;\">\n  <a href=\"#\" data-sharer=\"linkedin\" title=\"Partilhar no LinkedIn\">{{< fa brands linkedin >}}</a>\n  <a href=\"#\" data-sharer=\"whatsapp\" title=\"Partilhar por WhatsApp\">{{< fa brands whatsapp >}}</a>\n  <a href=\"#\" data-sharer=\"email\" title=\"Partilhar por Email\">{{< fa envelope >}}</a>\n</div>\n<script src=\"/sharer.core.js\"></script>\n<script src=\"/services/linkedin.js\"></script>\n<script src=\"/services/whatsapp.js\"></script>\n<script src=\"/services/email.js\"></script>\n<script>\n  Sharer.init(); // ensure click listeners are attached\n</script>\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js\" integrity=\"sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js\" integrity=\"sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n<script type=\"text/javascript\">\nwindow.PlotlyConfig = {MathJaxConfig: 'local'};\nif (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: \"STIX-Web\"}});}\n</script>\n<script type=\"module\">import \"https://cdn.plot.ly/plotly-3.1.0.min\"</script>\n\n"
      ]
    }
  }
}